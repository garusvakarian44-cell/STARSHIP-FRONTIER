<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antigravity | Space Management Tycoon</title>
    <!-- SEO Meta Tags -->
    <meta name="description"
        content="G√©rez votre station spatiale, minez de la crypto et optimisez votre √©nergie dans ce simulateur isom√©trique futuriste.">
    <meta name="author" content="Antigravity AI">

    <!-- Google Fonts: Outfit & Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Outfit:wght@400;700&display=swap"
        rel="stylesheet">

    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="ui-overlay">
        <!-- Main Menu Modal -->
        <div id="main-menu" class="modal">
            <div class="modal-content">
                <h1 class="accent">STARSHIP FRONTIER</h1>
                <div style="display: flex; flex-direction: column; gap: 10px; align-items: center; margin-top: 20px;">
                    <button id="continue-btn" onclick="window.loadGame()"
                        style="width: 250px; display: none; background: #ffcc00; color: black; border-color: #ffcc00;">CONTINUER
                        LA PARTIE</button>
                    <button onclick="window.startGame(false)" style="width: 250px;">TUTORIEL</button>
                    <button onclick="window.startGame(true)"
                        style="width: 250px; background: #00f2ff; color: black;">NOUVELLE PARTIE</button>
                </div>
            </div>
        </div>

        <header>
            <h1 id="game-title">STARSHIP <span class="accent">FRONTIER</span></h1>
            <div class="controls-hint">
                <span>üñ±Ô∏è Clic gauche : Placer</span>
                <span>üõí Shop : S√©lectionnez un module</span>
            </div>
            <div id="goal-hud" class="hud-item"
                style="position: absolute; top: 30px; right: 30px; border-left: 2px solid #ffcc00; display: none; pointer-events: auto; z-index: 50; box-shadow: 0 4px 15px rgba(0,0,0,0.5), inset 0 0 10px rgba(255, 204, 0, 0.05); width: 220px;">
                <span class="label" style="color: #ffcc00;">MISSION EN COURS</span>
                <span class="value" id="goal-text"
                    style="font-size: 0.85rem; color: #fff; white-space: normal;">Survivre</span>
                <div id="goal-progress"
                    style="width: 100%; height: 3px; background: rgba(255,255,255,0.05); margin-top: 8px;">
                    <div id="goal-bar"
                        style="width: 0%; height: 100%; background: #ffcc00; box-shadow: 0 0 8px #ffcc00;"></div>
                </div>
            </div>
        </header>

        <div id="game-container">
            <!-- Le canvas sera inject√© ici par engine.js -->
        </div>

        <div id="hud">
            <div class="hud-item" id="crypto-display">
                <span class="label">CRYPTO</span>
                <span class="value" id="crypto-val">1000</span>
            </div>
            <div class="hud-item" id="energy-display">
                <span class="label">√âNERGIE</span>
                <span class="value" id="energy-val">0/0 (100%)</span>
            </div>
            <div class="hud-item" id="oxygen-display">
                <span class="label">OXYG√àNE</span>
                <span class="value" id="oxygen-val">0%</span>
            </div>
            <div class="hud-item" id="pop-display">
                <span class="label">HABITANTS</span>
                <span class="value" id="pop-val">0</span>
                <span id="pop-bonus" style="font-size: 0.8em; margin-left: 5px;">(+0%)</span>
            </div>
            <div class="hud-item" id="food-display">
                <span class="label">NOURRITURE</span>
                <span class="value" id="food-val">0</span>
            </div>
            <div class="hud-item" id="science-display">
                <span class="label">SCIENCE</span>
                <span class="value" id="science-val">0</span>
            </div>
            <div class="hud-item" id="module-display">
                <span class="label">MODULES</span>
                <span class="value" id="module-val">0/0</span>
            </div>
            <div class="hud-item" id="stats-btn-container" style="cursor: pointer; padding: 0;"
                onclick="window.toggleStats()">
                <div
                    style="height: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; background: rgba(0, 242, 255, 0.05);">
                    <span style="font-size: 1.2rem;">üìä</span>
                    <span class="label" style="margin: 0; color: #fff; font-weight: bold;">STATS</span>
                </div>
            </div>
        </div>

        <!-- Game Over Modal -->
        <div id="game-over" class="modal" style="display: none;">
            <div class="modal-content">
                <h1 class="accent">MISSION √âCHOU√âE</h1>
                <p id="death-reason">Raison de la d√©faite</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button onclick="window.loadGame()" style="background: #ffcc00; color: black;">CHARGER DERNIER
                        SAUT</button>
                    <button onclick="window.resetAndStartOver()" style="background: #ff4444; color: white;">RECOMMENCER
                        √Ä Z√âRO</button>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="tutorial-success" class="modal" style="display: none;">
            <div class="modal-content">
                <h1 style="color: #00ff88;">F√âLICITATIONS !</h1>
                <p>Vous avez ma√Ætris√© les bases de la gestion orbitale.</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button id="success-btn" onclick="window.startSandbox()">MODE SURVIE (SANS TUTO)</button>
                    <button
                        onclick="document.getElementById('tutorial-success').style.display='none'; window.startAdvancedTutorial()">TUTO
                        APPROFONDI</button>
                </div>
            </div>
        </div>

        <!-- Start Hint -->
        <div id="start-hint" class="hint-popup" style="display: none;">
            <div class="hint-content">
                <span class="hint-icon" id="hint-icon">‚ö†Ô∏è</span>
                <div class="hint-text">
                    <p id="hint-title" style="margin:0; font-weight: bold; color: #ff6400;">Survie Initiale</p>
                    <p id="hint-desc" style="margin:5px 0 0 0;">Vos r√©serves baissent ! <br>Achetez <strong>2 R√©servoirs
                            √† Oxyg√®ne</strong> dans le magasin.</p>
                </div>
            </div>
        </div>

        <!-- Boon Modal -->
        <div id="boon-modal" class="modal" style="display: none; background: rgba(0,0,0,0.95);">
            <div class="modal-content" style="border-color: #ffcc00; min-width: 500px;">
                <h1 style="color: #ffcc00;">PRIME DE SECTEUR RE√áUE</h1>
                <p>La F√©d√©ration r√©compense votre efficacit√©. Choisissez un atout :</p>
                <div id="boon-choices" style="display: flex; gap: 20px; justify-content: center; margin-top: 30px;">
                    <!-- Les boutons de boons seront inject√©s ici -->
                </div>
            </div>
        </div>

        <!-- Event Choice Modal -->
        <div id="choice-modal" class="modal" style="display: none;">
            <div class="modal-content" style="border-color: #00f2ff;">
                <h1 id="choice-title" class="accent">SIGNAL D√âTECT√â</h1>
                <p id="choice-desc">Voulez-vous intercepter le signal inconnu ?</p>
                <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
                    <button id="choice-yes" style="background: #00ff88; color: black; width: 120px;">OUI</button>
                    <button id="choice-no" style="background: #ff4444; color: white; width: 120px;">NON</button>
                </div>
            </div>
        </div>
        <!-- Stats Modal -->
        <div id="stats-modal" class="modal" style="display: none; background: rgba(0,0,0,0.92);">
            <div class="modal-content" style="max-width: 500px; border-color: #00f2ff;">
                <h1 class="accent">STATISTIQUES & BONUS</h1>
                <div id="stats-content" style="text-align: left; margin-top: 20px; line-height: 1.6;">
                    <div
                        style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                        <h3 style="margin-top:0; color: #00f2ff;">TEMPS DE MISSION</h3>
                        <p id="stats-time" style="font-size: 1.5rem; font-weight: bold; margin: 5px 0;">00:00:00</p>
                        <p id="stats-sector" style="color: #ffcc00; font-size: 0.9rem;">Secteur actuel : 1</p>
                    </div>

                    <h3 style="color: #00f2ff;">BONUS ACTIFS</h3>
                    <div id="bonuses-list"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem;">
                        <!-- Rempli par JS -->
                    </div>
                </div>
                <button onclick="window.toggleStats()"
                    style="margin-top: 25px; width: 100%; background: #ff4444;">RETOUR</button>
            </div>
        </div>

        <!-- Merchant Modal -->
        <div id="merchant-modal" class="modal" style="display: none;">
            <div class="modal-content"
                style="max-width: 600px; border-color: #ffcc00; background: rgba(20, 20, 20, 0.95);">
                <h1 class="accent" style="color: #ffcc00;">üõ∞Ô∏è CARGO MARCHAND</h1>
                <p>Un vaisseau de passage propose des √©changes de ressources.</p>
                <div id="trade-container" style="display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">
                    <!-- Rempli par JS -->
                </div>
                <button onclick="window.closeMerchant();"
                    style="margin-top: 20px; background: #ff4444; color: white; width: 100%;">FERMER</button>
            </div>
        </div>

        <!-- Research Tree Modal -->
        <div id="research-modal" class="modal" style="display: none; background: rgba(0,0,0,0.9);">
            <div class="modal-content" style="max-width: 800px; border-color: #f1c40f;">
                <h1 class="accent" style="color: #f1c40f;">üî¨ ARCHIVES SCIENTIFIQUES</h1>
                <p>Am√©liorez votre station gr√¢ce √† la technologie. Points : <span id="research-points">0</span></p>
                <div id="research-grid"
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                    <!-- Rempli par JS -->
                </div>
                <button onclick="window.toggleResearch()"
                    style="margin-top: 20px; background: #ff4444; color: white; width: 100%;">FERMER (OU 'F')</button>
            </div>
        </div>
    </div>

    <!-- Drone Hangar Modal -->
    <div id="drone-hangar-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px; border-color: #0099ff;">
            <h1 class="accent" style="color: #0099ff;">üöÅ HANGAR DE DRONES</h1>
            <p>Drones disponibles : <span id="hangar-drone-count" style="color: #00ff88; font-weight: bold;">0</span>
            </p>
            <p>Drones d√©ploy√©s : <span id="hangar-deployed-count" style="color: #ffcc00; font-weight: bold;">0</span>
            </p>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="window.buyDrone(window.game.currentHangar)"
                    style="flex: 1; background: #0099ff; color: white;">
                    ACHETER DRONE (1000 üíé)
                </button>
                <button onclick="window.deployDrone(window.game.currentHangar)"
                    style="flex: 1; background: #00ff88; color: black;">
                    D√âPLOYER (50‚ö° + 20üíé)
                </button>
            </div>
            <button onclick="window.closeDroneHangar()"
                style="margin-top: 20px; background: #ff4444; color: white; width: 100%;">
                FERMER
            </button>
        </div>
    </div>

    <!-- Pause Menu Modal -->
    <div id="pause-modal" class="modal" style="display: none; background: rgba(0,0,0,0.85);">
        <div class="modal-content" style="max-width: 400px; border-color: #ffffff;">
            <h1 class="accent" style="color: #ffffff;">PAUSE</h1>
            <div style="display: flex; flex-direction: column; gap: 15px; margin-top: 20px;">
                <button onclick="window.togglePauseMenu()" style="background: #00f2ff; color: black;">REPRENDRE</button>
                <button onclick="window.loadGame()" style="background: #ffcc00; color: black;">CHARGER DERNI√àRE
                    SAUVEGARDE</button>
                <button onclick="window.location.reload()" style="background: #ff4444; color: white;">QUITTER VERS LE
                    MENU</button>
            </div>
        </div>
    </div>

    <!-- Script principal du jeu -->
    <script type="module" src="Main.js"></script>
    <div
        style="position: absolute; bottom: 10px; right: 20px; color: rgba(255, 255, 255, 0.3); font-size: 0.8rem; font-family: 'Inter', sans-serif; pointer-events: none; z-index: 1000;">
        version beta 0.8
    </div>
</body>

</html>